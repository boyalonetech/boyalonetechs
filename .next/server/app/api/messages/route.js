(()=>{var e={};e.id=434,e.ids=[434],e.modules={479:(e,s,r)=>{"use strict";r.r(s),r.d(s,{patchFetch:()=>j,routeModule:()=>l,serverHooks:()=>g,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>x});var t={};r.r(t),r.d(t,{DELETE:()=>p,GET:()=>i,PUT:()=>d});var o=r(6559),a=r(8088),n=r(7719),u=r(2190),c=r(6278);async function i(){try{let{data:e,error:s}=await c.N.from("messages").select("*").order("created_at",{ascending:!1});if(s)return console.error("Supabase GET error:",s),u.NextResponse.json({success:!1,error:s.message},{status:500});return u.NextResponse.json({success:!0,messages:e.map(e=>({id:e.id,from:e.from_name,email:e.email,subject:e.subject,message:e.message,date:e.created_at,read:e.read}))})}catch(e){return console.error("GET API error:",e),u.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}async function p(e){try{let{id:s}=await e.json();if(!s)return u.NextResponse.json({success:!1,error:"Message ID is required"},{status:400});let{error:r}=await c.N.from("messages").delete().eq("id",s);if(r)return console.error("Supabase DELETE error:",r),u.NextResponse.json({success:!1,error:r.message},{status:500});return u.NextResponse.json({success:!0,message:"Message deleted successfully"})}catch(e){return console.error("DELETE API error:",e),u.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}async function d(e){try{let{id:s,read:r}=await e.json();if(!s)return u.NextResponse.json({success:!1,error:"Message ID is required"},{status:400});let{data:t,error:o}=await c.N.from("messages").update({read:r}).eq("id",s).select();if(o)return console.error("Supabase PUT error:",o),u.NextResponse.json({success:!1,error:o.message},{status:500});return u.NextResponse.json({success:!0,data:t})}catch(e){return console.error("PUT API error:",e),u.NextResponse.json({success:!1,error:"Internal server error"},{status:500})}}let l=new o.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/messages/route",pathname:"/api/messages",filename:"route",bundlePath:"app/api/messages/route"},resolvedPagePath:"C:\\Users\\ADMIN\\Desktop\\workspace\\boyalonetech\\src\\app\\api\\messages\\route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:m,workUnitAsyncStorage:x,serverHooks:g}=l;function j(){return(0,n.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:x})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1997:e=>{"use strict";e.exports=require("punycode")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4075:e=>{"use strict";e.exports=require("zlib")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5591:e=>{"use strict";e.exports=require("https")},6278:(e,s,r)=>{"use strict";r.d(s,{N:()=>t});let t=(0,r(1453).UU)("https://qwumsqzcfjurbwrjxuoe.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InF3dW1zcXpjZmp1cmJ3cmp4dW9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY0MTk5NDUsImV4cCI6MjA3MTk5NTk0NX0.VBCVSqyZvY9HnC-Gi0TJQDsiQna6QRZxaej4rNDGRRc")},6487:()=>{},7910:e=>{"use strict";e.exports=require("stream")},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[447,453,580],()=>r(479));module.exports=t})();