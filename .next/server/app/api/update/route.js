(()=>{var e={};e.id=437,e.ids=[437],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1997:e=>{"use strict";e.exports=require("punycode")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4075:e=>{"use strict";e.exports=require("zlib")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5591:e=>{"use strict";e.exports=require("https")},6487:()=>{},7910:e=>{"use strict";e.exports=require("stream")},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9440:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>m,routeModule:()=>c,serverHooks:()=>x,workAsyncStorage:()=>d,workUnitAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{PATCH:()=>p});var o=r(6559),i=r(8088),n=r(7719),u=r(2190);let a=(0,r(1453).UU)("https://qwumsqzcfjurbwrjxuoe.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY);async function p(e){try{let{id:t,title:r,description:s,demoLink:o,imageUrl:i,pinned:n}=await e.json();if(console.log("Update PATCH request received:",{id:t,title:r,description:s,demoLink:o,imageUrl:i,pinned:n}),!t)return u.NextResponse.json({success:!1,error:"Project ID is required"},{status:400});let p={updated_at:new Date().toISOString()};if(void 0!==r&&(p.title=r),void 0!==s&&(p.description=s),void 0!==o&&(p.demo_link=o),void 0!==i&&(p.image_url=i),void 0!==n){if(!0===n){let{count:e,error:t}=await a.from("projects").select("*",{count:"exact",head:!0}).eq("pinned",!0);if(t)throw t;if(e&&e>=6)return u.NextResponse.json({success:!1,error:"Maximum of 6 projects can be pinned"},{status:400})}p.pinned=n}let{data:c,error:d}=await a.from("projects").update(p).eq("id",t).select();if(d)throw d;let l=c[0];return u.NextResponse.json({success:!0,project:{id:l.id,title:l.title,description:l.description,demoLink:l.demo_link,image:l.image_url,pinned:l.pinned||!1,createdAt:l.created_at}})}catch(t){let e=t instanceof Error?t.message:"An unknown error occurred";return u.NextResponse.json({success:!1,error:e},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/update/route",pathname:"/api/update",filename:"route",bundlePath:"app/api/update/route"},resolvedPagePath:"C:\\Users\\ADMIN\\Desktop\\workspace\\boyalonetech\\src\\app\\api\\update\\route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:d,workUnitAsyncStorage:l,serverHooks:x}=c;function m(){return(0,n.patchFetch)({workAsyncStorage:d,workUnitAsyncStorage:l})}},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,453,580],()=>r(9440));module.exports=s})();